{"version":3,"file":"js/335.f8efe5ee.js","mappings":"iLAIA,MAAM,KAAEA,IAASC,EAAAA,EAAAA,KAEXC,EAAaA,KACjB,MAAMC,GAAQC,EAAAA,EAAAA,IAAI,MACZC,GAAMD,EAAAA,EAAAA,IAAI,MACVE,GAAWF,EAAAA,EAAAA,IAAI,MAEfG,EAAcC,UAClBF,EAASG,MAAS,UAAST,EAAKS,MAAMC,OAAOC,EAAKC,OAClD,MAAMC,EAAaC,EAAAA,GAAeV,IAAIE,EAASG,OAE/C,IACE,MAAMM,QAAYF,EAAWG,IAAIL,GACjCN,EAAII,YAAcM,EAAIX,IAAIa,gBAC5B,CAAE,MAAOC,KACPC,QAAQC,IAAIF,IAAIG,SAChBlB,EAAMM,MAAQS,IAAIG,OACpB,GAGIC,EAAcd,UAClB,MAAMK,EAAaC,EAAAA,GAAeV,IAAImB,GACtC,UACQV,EAAWW,QACnB,CAAE,MAAOrB,GACPgB,QAAQC,IAAIF,IAAIG,SAChBlB,EAAMM,MAAQS,IAAIG,OACpB,GAGF,MAAO,CAAEd,cAAaF,MAAKC,WAAUH,QAAOmB,cAAa,EAG3D,K,2GCnCsBG,MAAM,S,SACHA,MAAM,oB,GACpBA,MAAM,iB,GACJA,MAAM,S,aAIRA,MAAM,Y,GACNA,MAAM,e,GAGNA,MAAM,a,aAGFA,MAAM,W,oFAfnBC,EAAAA,EAAAA,IAyBM,YAxBOC,EAAAxB,QAAK,WAAhBuB,EAAAA,EAAAA,IAAiD,MAAjDE,GAAiDC,EAAAA,EAAAA,IAAdF,EAAAxB,OAAK,oBAC7BwB,EAAAG,WAAQ,WAAnBJ,EAAAA,EAAAA,IAsBM,MAtBNK,EAsBM,EArBJC,EAAAA,EAAAA,GAQM,MARNC,EAQM,EAPJD,EAAAA,EAAAA,GAEM,MAFNE,EAEM,EADJF,EAAAA,EAAAA,GAAgC,OAA1BG,IAAKR,EAAAG,SAASM,U,aAEtBJ,EAAAA,EAAAA,GAA6B,WAAAH,EAAAA,EAAAA,IAAtBF,EAAAG,SAASO,OAAK,IACrBL,EAAAA,EAAAA,GAA0D,IAA1DM,EAAoB,eAAWT,EAAAA,EAAAA,IAAGF,EAAAG,SAASS,UAAQ,IACnDP,EAAAA,EAAAA,GAAqD,IAArDQ,GAAqDX,EAAAA,EAAAA,IAA3BF,EAAAG,SAASW,aAAW,GACVd,EAAAe,YAAS,WAA7ChB,EAAAA,EAAAA,IAA8D,U,MAArDiB,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAElB,EAAAmB,cAAAnB,EAAAmB,gBAAAD,KAA+B,YAAM,kBAEvDb,EAAAA,EAAAA,GAWM,MAXNe,EAWM,CAVOpB,EAAAG,SAASkB,MAAMC,SAAM,WAAhCvB,EAAAA,EAAAA,IAAqE,MAAAwB,EAAnC,mCAA6B,8BAC/DxB,EAAAA,EAAAA,IAMMyB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IANczB,EAAAG,SAASkB,OAAjBK,K,WAAZ3B,EAAAA,EAAAA,IAMM,OAN+B4B,IAAKD,EAAKE,GAAI9B,MAAM,e,EACvDO,EAAAA,EAAAA,GAGM,MAHNwB,EAGM,EAFJxB,EAAAA,EAAAA,GAAyB,WAAAH,EAAAA,EAAAA,IAAlBwB,EAAKhB,OAAK,IACjBL,EAAAA,EAAAA,GAAwB,UAAAH,EAAAA,EAAAA,IAAlBwB,EAAKI,QAAM,KAEL9B,EAAAe,YAAS,WAAvBhB,EAAAA,EAAAA,IAAsE,U,MAA5CiB,QAAKe,GAAE/B,EAAAgC,YAAYN,EAAKE,KAAK,SAAM,EAAAK,KAAA,oB,MAGhDjC,EAAAe,YAAS,WAAxBmB,EAAAA,EAAAA,IAAiDC,EAAA,C,MAAtBhC,SAAUH,EAAAG,U,uGCpB7C,MAAMiC,EAAcA,CAACC,EAAYT,KAC/B,IAAIpD,GAAQC,EAAAA,EAAAA,IAAI,MACZ6D,GAAY7D,EAAAA,EAAAA,KAAI,GAChB8D,EAASC,EAAAA,GAAiBH,WAAWA,GAAYI,IAAIb,GAEzD,MAAMc,EAAY7D,UAChByD,EAAUxD,OAAQ,EAClBN,EAAMM,MAAQ,KACd,IACE,MAAMM,QAAYmD,EAAO1C,SAEzB,OADAyC,EAAUxD,OAAQ,EACXM,CACT,CAAE,MAAOG,KACPC,QAAQC,IAAIF,IAAIG,SAChB4C,EAAUxD,OAAQ,EAClBN,EAAMM,MAAQ,+BAChB,GAEI6D,EAAY9D,UAChByD,EAAUxD,OAAQ,EAClBN,EAAMM,MAAQ,KACd,IACE,MAAMM,QAAYmD,EAAOK,OAAOC,GAEhC,OADAP,EAAUxD,OAAQ,EACXM,CACT,CAAE,MAAOG,KACPC,QAAQC,IAAIF,IAAIG,SAChB4C,EAAUxD,OAAQ,EAClBN,EAAMM,MAAQ,+BAChB,GAGF,MAAO,CAAEN,QAAO8D,YAAWI,YAAUC,YAAW,EAGlD,QCnCA,MAAMG,EAAcA,CAACT,EAAYT,KAC/B,MAAMmB,GAAWtE,EAAAA,EAAAA,IAAI,MACfD,GAAQC,EAAAA,EAAAA,IAAI,MAClB,IAAIuE,EAAcR,EAAAA,GAAiBH,WAAWA,GAAYI,IAAIb,GAkB9D,OAhBAoB,EAAYC,YACTR,IACKA,EAAIS,QACNH,EAASjE,MAAQ,IAAK2D,EAAIS,OAAQtB,GAAIa,EAAIb,IAC1CpD,EAAMM,MAAQ,MAEdN,EAAMM,MAAQ,0BAGhBN,EAAMM,MAAQ,IAAI,IAEnBS,IACCC,QAAQC,IAAIF,EAAIG,SAChBlB,EAAMM,MAAQ,sBAAsB,IAGjC,CAAEiE,WAAUvE,QAAO,EAG5B,Q,uCC1BOsB,MAAM,Y,GAGPO,EAAAA,EAAAA,GAAuB,UAAnB,kBAAc,G,GAGlBA,EAAAA,EAAAA,GAAoB,cAAZ,OAAG,G,0CANfN,EAAAA,EAAAA,IAQM,MARNE,EAQM,CAPWD,EAAAmD,UAA2C,iBAAnC,WAAvBpD,EAAAA,EAAAA,IAAmE,U,MAAzCiB,QAAKC,EAAA,KAAAA,EAAA,GAAAc,GAAE/B,EAAAmD,UAAW,IAAM,aACtCnD,EAAAmD,WAAQ,WAApBpD,EAAAA,EAAAA,IAKO,Q,MALgBqD,SAAMnC,EAAA,KAAAA,EAAA,IAAAoC,EAAAA,EAAAA,KAAA,IAAAnC,IAAUlB,EAAAsD,cAAAtD,EAAAsD,gBAAApC,IAAY,e,CACjDd,GAAuB,SACvBC,EAAAA,EAAAA,GAAuE,SAAhEkD,KAAK,OAAOC,YAAY,aAAaC,SAAA,G,qCAAkBzD,EAAAU,MAAKqB,I,iBAAL/B,EAAAU,UAAK,SACnEL,EAAAA,EAAAA,GAAoE,SAA7DkD,KAAK,OAAOC,YAAY,SAASC,SAAA,G,qCAAkBzD,EAAA8B,OAAMC,I,iBAAN/B,EAAA8B,UAC1DxB,GAAoB,sB,CAS1B,OACEoD,MAAO,CAAC,YACRC,KAAAA,CAAMD,GACJ,MAAMhD,GAAQjC,EAAAA,EAAAA,IAAI,IACZqD,GAASrD,EAAAA,EAAAA,IAAI,IACb0E,GAAW1E,EAAAA,EAAAA,KAAI,IACf,UAAEkE,GAAcP,EAAY,YAAasB,EAAMvD,SAASyB,IAExD0B,EAAezE,UACnB,MAAM+E,EAAU,CACdlD,MAAOA,EAAM5B,MACbgD,OAAQA,EAAOhD,MACf8C,GAAIiC,KAAKC,MAAsB,IAAhBD,KAAKE,iBAEhBpB,EAAU,CACdtB,MAAO,IAAIqC,EAAMvD,SAASkB,MAAOuC,KAEnClD,EAAM5B,MAAQ,GACdgD,EAAOhD,MAAQ,EAAE,EAGnB,MAAO,CAAE4B,QAAOoB,SAAQqB,WAAUG,eACpC,G,QC/BF,MAAMU,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,QJ4BA,GACEN,MAAO,CAAC,MACRO,WAAY,CAAEC,QAAOA,GACrBP,KAAAA,CAAMD,GACJ,MAAM,MAAElF,EAAOuE,SAAU5C,GAAa2C,EAAY,YAAaY,EAAM9B,KAC/D,KAAEvD,IAASC,EAAAA,EAAAA,MACX,UAAEoE,EAAS,UAAEC,GAAcP,EAAY,YAAasB,EAAM9B,KAC1D,YAAEjC,IAAgBpB,EAAAA,EAAAA,KAClB4F,GAASC,EAAAA,EAAAA,MACTrD,GAAYsD,EAAAA,EAAAA,KAAS,IAEvBlE,EAASrB,OAAST,EAAKS,OAAST,EAAKS,MAAMC,MAAQoB,EAASrB,MAAMwF,SAGhEnD,EAAetC,gBACbc,EAAYQ,EAASrB,MAAMH,gBAC3B+D,IACNyB,EAAOI,KAAK,CAAEtF,KAAM,QAAS,EAEzB+C,EAAcnD,UAClB,MAAMwC,EAAQlB,EAASrB,MAAMuC,MAAMmD,QAAQ9C,GAASA,EAAKE,KAAOA,UAC1De,EAAU,CAAEtB,MAAOA,GAAQ,EAEnC,MAAO,CAAE7C,QAAO2B,WAAUY,YAAWI,eAAca,cACrD,GKtDF,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASyC,KAEpE,O","sources":["webpack://17-playlist-uygulamma-6/./src/composables/useStorage.js","webpack://17-playlist-uygulamma-6/./src/views/playlists/PlaylistDetails.vue","webpack://17-playlist-uygulamma-6/./src/composables/useDocument.js","webpack://17-playlist-uygulamma-6/./src/composables/getDocument.js","webpack://17-playlist-uygulamma-6/./src/components/AddSong.vue","webpack://17-playlist-uygulamma-6/./src/components/AddSong.vue?fcf0","webpack://17-playlist-uygulamma-6/./src/views/playlists/PlaylistDetails.vue?7837"],"sourcesContent":["import { projectStorage } from \"../firebase/config\";\r\nimport { ref } from \"vue\";\r\nimport getUser from \"./getUser\";\r\n\r\nconst { user } = getUser();\r\n\r\nconst useStorage = () => {\r\n  const error = ref(null);\r\n  const url = ref(null);\r\n  const filePath = ref(null);\r\n\r\n  const uploadImage = async (file) => {\r\n    filePath.value = `covers/${user.value.uid}/${file.name}`;\r\n    const storageRef = projectStorage.ref(filePath.value);\r\n\r\n    try {\r\n      const res = await storageRef.put(file);\r\n      url.value = await res.ref.getDownloadURL();\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      error.value = err.message;\r\n    }\r\n  };\r\n\r\n  const deleteImage = async (path) => {\r\n    const storageRef = projectStorage.ref(path);\r\n    try {\r\n      await storageRef.delete();\r\n    } catch (error) {\r\n      console.log(err.message);\r\n      error.value = err.message;\r\n    }\r\n  };\r\n\r\n  return { uploadImage, url, filePath, error, deleteImage };\r\n};\r\n\r\nexport default useStorage;\r\n","<template>\r\n  <div>\r\n    <div v-if=\"error\" class=\"error\">{{ error }}</div>\r\n    <div v-if=\"playlist\" class=\"playlist-details\">\r\n      <div class=\"playlist-info\">\r\n        <div class=\"cover\">\r\n          <img :src=\"playlist.coverUrl\" />\r\n        </div>\r\n        <h2>{{ playlist.title }}</h2>\r\n        <p class=\"username\">Created by {{ playlist.userName }}</p>\r\n        <p class=\"description\">{{ playlist.description }}</p>\r\n        <button @click=\"handleDelete\" v-if=\"ownership\">Delete</button>\r\n      </div>\r\n      <div class=\"song-list\">\r\n        <div v-if=\"playlist.songs.length\">no songs have been added yet.</div>\r\n        <div v-for=\"song in playlist.songs\" :key=\"song.id\" class=\"single-song\">\r\n          <div class=\"details\">\r\n            <h3>{{ song.title }}</h3>\r\n            <p>{{ song.artist }}</p>\r\n          </div>\r\n          <button v-if=\"ownership\" @click=\"handleClick(song.id)\">Delete</button>\r\n        </div>\r\n\r\n        <AddSong v-if=\"ownership\" :playlist=\"playlist\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport useStorage from \"../../composables/useStorage\";\r\nimport useDocument from \"../../composables/useDocument\";\r\nimport getDocument from \"@/composables/getDocument\";\r\nimport getUser from \"@/composables/getUser\";\r\nimport { computed } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport AddSong from \"@/components/AddSong.vue\";\r\n\r\nexport default {\r\n  props: [\"id\"],\r\n  components: { AddSong },\r\n  setup(props) {\r\n    const { error, document: playlist } = getDocument(\"playlists\", props.id);\r\n    const { user } = getUser();\r\n    const { deleteDoc, updateDoc } = useDocument(\"playlists\", props.id);\r\n    const { deleteImage } = useStorage();\r\n    const router = useRouter();\r\n    const ownership = computed(() => {\r\n      return (\r\n        playlist.value && user.value && user.value.uid === playlist.value.userId\r\n      );\r\n    });\r\n    const handleDelete = async () => {\r\n      await deleteImage(playlist.value.filePath);\r\n      await deleteDoc();\r\n      router.push({ name: \"home\" });\r\n    };\r\n    const handleClick = async (id) => {\r\n      const songs = playlist.value.songs.filter((song) => song.id !== id);\r\n      await updateDoc({ songs: songs });\r\n    };\r\n    return { error, playlist, ownership, handleDelete, handleClick };\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.playlist-details {\r\n  display: grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  gap: 80px;\r\n}\r\n.cover {\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n  position: relative;\r\n  padding: 160px;\r\n}\r\n.cover img {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  min-width: 100%;\r\n  min-height: 100%;\r\n}\r\n.playlist-info {\r\n  text-align: center;\r\n}\r\n.playlist-info h2 {\r\n  text-transform: capitalize;\r\n  font-size: 28px;\r\n  margin-top: 20px;\r\n}\r\n.playlist-info p {\r\n  margin-bottom: 20px;\r\n}\r\n.username {\r\n  color: #999;\r\n}\r\n.description {\r\n  text-align: left;\r\n}\r\n.single-song {\r\n  padding: 10px 0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px dashed var(--secondary);\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n","import { ref } from \"vue\";\r\nimport { projectFirestore } from \"../firebase/config\";\r\n\r\nconst useDocument = (collection, id) => {\r\n  let error = ref(null);\r\n  let isPending = ref(false);\r\n  let docRef = projectFirestore.collection(collection).doc(id);\r\n\r\n  const deleteDoc = async () => {\r\n    isPending.value = true;\r\n    error.value = null;\r\n    try {\r\n      const res = await docRef.delete();\r\n      isPending.value = false;\r\n      return res;\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      isPending.value = false;\r\n      error.value = \"could not delete the document\";\r\n    }\r\n  };\r\n  const updateDoc = async (updates) => {\r\n    isPending.value = true;\r\n    error.value = null;\r\n    try {\r\n      const res = await docRef.update(updates);\r\n      isPending.value = false;\r\n      return res;\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      isPending.value = false;\r\n      error.value = \"could not update the document\";\r\n    }\r\n  };\r\n\r\n  return { error, isPending, deleteDoc,updateDoc };\r\n};\r\n\r\nexport default useDocument;\r\n","import { ref } from \"vue\";\r\nimport { projectFirestore } from \"../firebase/config\";\r\n\r\nconst getDocument = (collection, id) => {\r\n  const document = ref(null);\r\n  const error = ref(null);\r\n  let documentRef = projectFirestore.collection(collection).doc(id);\r\n\r\n  documentRef.onSnapshot(\r\n    (doc) => {\r\n      if (doc.data()) {\r\n        document.value = { ...doc.data(), id: doc.id };\r\n        error.value = null;\r\n      } else {\r\n        error.value = \"document not fetch data\";\r\n      }\r\n\r\n      error.value = null;\r\n    },\r\n    (err) => {\r\n      console.log(err.message);\r\n      error.value = \"could not fetch data\";\r\n    }\r\n  );\r\n  return { document, error };\r\n};\r\n\r\nexport default getDocument;\r\n","<template>\r\n  <div class=\"add-song\">\r\n    <button v-if=\"!showForm\" @click=\"showForm = true\">Add Song</button>\r\n    <form v-if=\"showForm\" @submit.prevent=\"handleSubmit\">\r\n      <h4>Add a New Song</h4>\r\n      <input type=\"text\" placeholder=\"Song Title\" required v-model=\"title\" />\r\n      <input type=\"text\" placeholder=\"Artist\" required v-model=\"artist\" />\r\n      <button>Add</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport useDocument from \"@/composables/useDocument\";\r\n\r\nimport { ref } from \"vue\";\r\n\r\nexport default {\r\n  props: [\"playlist\"],\r\n  setup(props) {\r\n    const title = ref(\"\");\r\n    const artist = ref(\"\");\r\n    const showForm = ref(false);\r\n    const { updateDoc } = useDocument(\"playlists\", props.playlist.id);\r\n\r\n    const handleSubmit = async () => {\r\n      const newSong = {\r\n        title: title.value,\r\n        artist: artist.value,\r\n        id: Math.floor(Math.random() * 1000000),\r\n      };\r\n      await updateDoc({\r\n        songs: [...props.playlist.songs, newSong],\r\n      });\r\n      title.value = \"\";\r\n      artist.value = \"\";\r\n    };\r\n\r\n    return { title, artist, showForm, handleSubmit };\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.add-song {\r\n  text-align: center;\r\n  margin-top: 40px;\r\n}\r\nform {\r\n  max-width: 100%;\r\n  text-align: left;\r\n}\r\n</style>\r\n","import { render } from \"./AddSong.vue?vue&type=template&id=c7ae1c04\"\nimport script from \"./AddSong.vue?vue&type=script&lang=js\"\nexport * from \"./AddSong.vue?vue&type=script&lang=js\"\n\nimport \"./AddSong.vue?vue&type=style&index=0&id=c7ae1c04&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PlaylistDetails.vue?vue&type=template&id=8f733ade\"\nimport script from \"./PlaylistDetails.vue?vue&type=script&lang=js\"\nexport * from \"./PlaylistDetails.vue?vue&type=script&lang=js\"\n\nimport \"./PlaylistDetails.vue?vue&type=style&index=0&id=8f733ade&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["user","getUser","useStorage","error","ref","url","filePath","uploadImage","async","value","uid","file","name","storageRef","projectStorage","res","put","getDownloadURL","err","console","log","message","deleteImage","path","delete","class","_createElementBlock","$setup","_hoisted_1","_toDisplayString","playlist","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","src","coverUrl","title","_hoisted_6","userName","_hoisted_7","description","ownership","onClick","_cache","args","handleDelete","_hoisted_8","songs","length","_hoisted_9","_Fragment","_renderList","song","key","id","_hoisted_10","artist","$event","handleClick","_hoisted_11","_createBlock","_component_AddSong","useDocument","collection","isPending","docRef","projectFirestore","doc","deleteDoc","updateDoc","update","updates","getDocument","document","documentRef","onSnapshot","data","showForm","onSubmit","_withModifiers","handleSubmit","type","placeholder","required","props","setup","newSong","Math","floor","random","__exports__","components","AddSong","router","useRouter","computed","userId","push","filter","render"],"sourceRoot":""}