{"version":3,"file":"js/149.7342f6f8.js","mappings":"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","sources":["webpack://17-playlist-uygulamma-6/./src/composables/useStorage.js","webpack://17-playlist-uygulamma-6/./src/views/playlists/CreatePlayList.vue","webpack://17-playlist-uygulamma-6/./src/composables/useCollection.js","webpack://17-playlist-uygulamma-6/./src/views/playlists/CreatePlayList.vue?e9db"],"sourcesContent":["import { projectStorage } from \"../firebase/config\";\r\nimport { ref } from \"vue\";\r\nimport getUser from \"./getUser\";\r\n\r\nconst { user } = getUser();\r\n\r\nconst useStorage = () => {\r\n  const error = ref(null);\r\n  const url = ref(null);\r\n  const filePath = ref(null);\r\n\r\n  const uploadImage = async (file) => {\r\n    filePath.value = `covers/${user.value.uid}/${file.name}`;\r\n    const storageRef = projectStorage.ref(filePath.value);\r\n\r\n    try {\r\n      const res = await storageRef.put(file);\r\n      url.value = await res.ref.getDownloadURL();\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      error.value = err.message;\r\n    }\r\n  };\r\n\r\n  const deleteImage = async (path) => {\r\n    const storageRef = projectStorage.ref(path);\r\n    try {\r\n      await storageRef.delete();\r\n    } catch (error) {\r\n      console.log(err.message);\r\n      error.value = err.message;\r\n    }\r\n  };\r\n\r\n  return { uploadImage, url, filePath, error, deleteImage };\r\n};\r\n\r\nexport default useStorage;\r\n","<template>\r\n  <form @submit.prevent=\"handleSubmit\">\r\n    <h4>Create Playlist</h4>\r\n    <input type=\"text\" required placeholder=\"Playlist title\" v-model=\"title\" />\r\n    <textarea\r\n      required\r\n      placeholder=\"Playlist Description..\"\r\n      v-model=\"description\"\r\n    ></textarea>\r\n    <label> UPload playlist cover image</label>\r\n    <input type=\"file\" @change=\"handleChange\" />\r\n    <div class=\"error\">{{ fileError }}</div>\r\n    <button v-if=\"!isPending\">Create</button>\r\n    <button v-else disabled>Saving...</button>\r\n  </form>\r\n</template>\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport useStorage from \"@/composables/useStorage\";\r\nimport useCollection from \"@/composables/useCollection\";\r\nimport getUser from \"@/composables/getUser\";\r\nimport { timestamp } from \"@/firebase/config\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  setup() {\r\n    const { filePath, url, uploadImage } = useStorage();\r\n    const { error, addDoc } = useCollection(\"playlists\");\r\n\r\n    const { user } = getUser();\r\n    const router = useRouter();\r\n\r\n    const isPending = ref(false);\r\n\r\n    const title = ref(\"\");\r\n    const description = ref(\"\");\r\n    const file = ref(null);\r\n    const fileError = ref(null);\r\n    const handleSubmit = async () => {\r\n      if (file.value) {\r\n        isPending.value = true;\r\n        await uploadImage(file.value);\r\n        const res = await addDoc({\r\n          title: title.value,\r\n          description: description.value,\r\n          userId: user.value.uid,\r\n          userName: user.value.displayName,\r\n          coverUrl: url.value,\r\n          filePath: filePath.value,\r\n          songs: [],\r\n          createdAt: timestamp(),\r\n        });\r\n        isPending.value = false;\r\n        if (!error.value) {\r\n          router.push({ name: \"playlistdetails\", params: { id: res.id } });\r\n        }\r\n      }\r\n    };\r\n    const types = [\"image/png\", \"image/jpeg\"];\r\n    const handleChange = (e) => {\r\n      const selected = e.target.files[0];\r\n\r\n      if (selected && types.includes(selected.type)) {\r\n        file.value = selected;\r\n        fileError.value = null;\r\n      } else {\r\n        file.value = null;\r\n        fileError.value = \"please select an image (png or jpeg)\";\r\n      }\r\n    };\r\n\r\n    return {\r\n      title,\r\n      description,\r\n      handleSubmit,\r\n      handleChange,\r\n      fileError,\r\n      isPending,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style>\r\ninput[type=\"file\"] {\r\n  border: 0;\r\n  padding: 0;\r\n}\r\nlabel {\r\n  font-size: 12px;\r\n  display: block;\r\n  margin-top: 30px;\r\n}\r\nbutton {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n","import { ref } from \"vue\";\r\nimport { projectFirestore } from \"../firebase/config\";\r\n\r\nconst useCollection = (collection) => {\r\n  const error = ref(null);\r\n  const isPending = ref(false);\r\n\r\n  const addDoc = async (doc) => {\r\n    error.value = null;\r\n    isPending.value = true;\r\n\r\n    try {\r\n      const res = await projectFirestore.collection(collection).add(doc);\r\n      isPending.value = false;\r\n      return res;\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      error.value = \"could not send the message\";\r\n      isPending.value = false;\r\n    }\r\n  };\r\n\r\n  return { error, addDoc, isPending };\r\n};\r\n\r\nexport default useCollection;\r\n","import { render } from \"./CreatePlayList.vue?vue&type=template&id=432ff284\"\nimport script from \"./CreatePlayList.vue?vue&type=script&lang=js\"\nexport * from \"./CreatePlayList.vue?vue&type=script&lang=js\"\n\nimport \"./CreatePlayList.vue?vue&type=style&index=0&id=432ff284&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["user","getUser","useStorage","error","ref","url","filePath","uploadImage","async","value","uid","file","name","storageRef","projectStorage","res","put","getDownloadURL","err","console","log","message","deleteImage","path","delete","_createElementVNode","class","disabled","_createElementBlock","onSubmit","_cache","_withModifiers","args","$setup","handleSubmit","_hoisted_1","type","required","placeholder","title","$event","description","_hoisted_2","onChange","handleChange","_hoisted_3","_toDisplayString","fileError","isPending","_hoisted_5","_hoisted_4","useCollection","collection","addDoc","projectFirestore","add","doc","setup","router","useRouter","userId","userName","displayName","coverUrl","songs","createdAt","timestamp","push","params","id","types","e","selected","target","files","includes","__exports__","render"],"sourceRoot":""}