"use strict";(self["webpackChunk_17_playlist_uygulamma_6"]=self["webpackChunk_17_playlist_uygulamma_6"]||[]).push([[149],{1434:function(e,l,a){var t=a(7732),n=a(4870),r=a(9944);const{user:u}=(0,r.Z)(),i=()=>{const e=(0,n.iH)(null),l=(0,n.iH)(null),a=(0,n.iH)(null),r=async n=>{a.value=`covers/${u.value.uid}/${n.name}`;const r=t.vY.ref(a.value);try{const e=await r.put(n);l.value=await e.ref.getDownloadURL()}catch(err){console.log(err.message),e.value=err.message}},i=async l=>{const a=t.vY.ref(l);try{await a.delete()}catch(e){console.log(err.message),e.value=err.message}};return{uploadImage:r,url:l,filePath:a,error:e,deleteImage:i}};l.Z=i},9149:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(3396),n=a(9242),r=a(7139);const u=(0,t._)("h4",null,"Create Playlist",-1),i=(0,t._)("label",null," UPload playlist cover image",-1),s={class:"error"},o={key:0},c={key:1,disabled:""};function d(e,l,a,d,v,g){return(0,t.wg)(),(0,t.iD)("form",{onSubmit:l[3]||(l[3]=(0,n.iM)(((...e)=>d.handleSubmit&&d.handleSubmit(...e)),["prevent"]))},[u,(0,t.wy)((0,t._)("input",{type:"text",required:"",placeholder:"Playlist title","onUpdate:modelValue":l[0]||(l[0]=e=>d.title=e)},null,512),[[n.nr,d.title]]),(0,t.wy)((0,t._)("textarea",{required:"",placeholder:"Playlist Description..","onUpdate:modelValue":l[1]||(l[1]=e=>d.description=e)},null,512),[[n.nr,d.description]]),i,(0,t._)("input",{type:"file",onChange:l[2]||(l[2]=(...e)=>d.handleChange&&d.handleChange(...e))},null,32),(0,t._)("div",s,(0,r.zw)(d.fileError),1),d.isPending?((0,t.wg)(),(0,t.iD)("button",c,"Saving...")):((0,t.wg)(),(0,t.iD)("button",o,"Create"))],32)}a(7658);var v=a(4870),g=a(1434),p=a(7732);const m=e=>{const l=(0,v.iH)(null),a=(0,v.iH)(!1),t=async t=>{l.value=null,a.value=!0;try{const l=await p.H1.collection(e).add(t);return a.value=!1,l}catch(err){console.log(err.message),l.value="could not send the message",a.value=!1}};return{error:l,addDoc:t,isPending:a}};var y=m,h=a(9944),f=a(2483),w={setup(){const{filePath:e,url:l,uploadImage:a}=(0,g.Z)(),{error:t,addDoc:n}=y("playlists"),{user:r}=(0,h.Z)(),u=(0,f.tv)(),i=(0,v.iH)(!1),s=(0,v.iH)(""),o=(0,v.iH)(""),c=(0,v.iH)(null),d=(0,v.iH)(null),m=async()=>{if(c.value){i.value=!0,await a(c.value);const d=await n({title:s.value,description:o.value,userId:r.value.uid,userName:r.value.displayName,coverUrl:l.value,filePath:e.value,songs:[],createdAt:(0,p.AB)()});i.value=!1,t.value||u.push({name:"playlistdetails",params:{id:d.id}})}},w=["image/png","image/jpeg"],_=e=>{const l=e.target.files[0];l&&w.includes(l.type)?(c.value=l,d.value=null):(c.value=null,d.value="please select an image (png or jpeg)")};return{title:s,description:o,handleSubmit:m,handleChange:_,fileError:d,isPending:i}}},_=a(89);const H=(0,_.Z)(w,[["render",d]]);var b=H}}]);
//# sourceMappingURL=149.7342f6f8.js.map